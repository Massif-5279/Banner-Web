<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŒå±‚è½®æ’­å›¾</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            overflow: hidden;
            background: #000;
        }

        .carousel-container {
            position: relative;
            width: 100vw;
            height: 100vh;
        }

        /* èƒŒæ™¯è½®æ’­å›¾ - æ¨¡ç³Šæ•ˆæœï¼Œå®Œå…¨å¡«æ»¡å±å¹• */
        .background-carousel {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        .background-carousel img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover; /* å®Œå…¨å¡«æ»¡å±å¹•ï¼Œä¸ä¿æŒæ¯”ä¾‹ */
            filter: blur(20px); /* æ¨¡ç³Šæ•ˆæœ */
            opacity: 0;
            transition: opacity 1s ease-in-out;
        }

        .background-carousel img.active {
            opacity: 0.7; /* èƒŒæ™¯å›¾ç‰‡é€æ˜åº¦ */
        }

        /* ä¸»è½®æ’­å›¾ - ä¿æŒæ¯”ä¾‹ï¼Œå¡«æ»¡å±å¹• */
        .main-carousel {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 2;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .main-carousel img {
            position: absolute;
            max-width: 100%;
            max-height: 100%;
            object-fit: contain; /* ä¿æŒåŸå§‹æ¯”ä¾‹ */
            opacity: 0;
            transition: opacity 1s ease-in-out;
        }

        .main-carousel img.active {
            opacity: 1;
        }

        /* æ§åˆ¶é¢æ¿ */
        .controls {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 10;
            background: rgba(0, 0, 0, 0.8);
            padding: 20px;
            border-radius: 10px;
            color: white;
            backdrop-filter: blur(10px);
            display: none; /* éšè—æ§åˆ¶é¢æ¿ */
        }

        .control-group {
            margin-bottom: 15px;
        }

        .control-group label {
            display: block;
            margin-bottom: 5px;
            font-size: 14px;
        }

        .control-group input[type="range"] {
            width: 200px;
            margin-right: 10px;
        }

        .control-group input[type="number"] {
            width: 80px;
            padding: 5px;
            border: none;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            text-align: center;
        }

        .control-buttons {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            cursor: pointer;
            transition: background 0.3s;
        }

        .btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        /* æŒ‡ç¤ºå™¨ */
        .indicators {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
            display: flex;
            gap: 10px;
        }

        .indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.5);
            cursor: pointer;
            transition: background 0.3s;
        }

        .indicator.active {
            background: white;
        }

        /* å¯¼èˆªç®­å¤´ */
        .nav-arrow {
            position: fixed;
            top: 50%;
            transform: translateY(-50%);
            z-index: 10;
            background: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 20px;
            transition: background 0.3s;
        }

        .nav-arrow:hover {
            background: rgba(0, 0, 0, 0.8);
        }

        .nav-arrow.prev {
            left: 20px;
        }

        .nav-arrow.next {
            right: 20px;
        }

        /* çŠ¶æ€æ˜¾ç¤º */
        .status {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 10;
            background: rgba(0, 0, 0, 0.8);
            padding: 10px 15px;
            border-radius: 5px;
            color: white;
            font-size: 14px;
            display: none; /* éšè—çŠ¶æ€æ˜¾ç¤º */
        }
    </style>
</head>
<body>
    <div class="carousel-container">
        <!-- èƒŒæ™¯è½®æ’­å›¾ -->
        <div class="background-carousel" id="backgroundCarousel">
            <!-- å›¾ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€æ·»åŠ  -->
        </div>

        <!-- ä¸»è½®æ’­å›¾ -->
        <div class="main-carousel" id="mainCarousel">
            <!-- å›¾ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€æ·»åŠ  -->
        </div>
    </div>

    <!-- æ§åˆ¶é¢æ¿ -->
    <div class="controls">
        <div class="control-group">
            <label>åˆ‡æ¢é—´éš” (ç§’)</label>
            <input type="range" id="intervalSlider" min="1" max="10" value="3" step="0.5">
            <input type="number" id="intervalInput" min="1" max="10" value="3" step="0.5">
        </div>
        <div class="control-buttons">
            <button class="btn" id="playPauseBtn">æš‚åœ</button>
            <button class="btn" id="prevBtn">ä¸Šä¸€å¼ </button>
            <button class="btn" id="nextBtn">ä¸‹ä¸€å¼ </button>
        </div>
    </div>

    <!-- æŒ‡ç¤ºå™¨ -->
    <div class="indicators" id="indicators">
        <!-- æŒ‡ç¤ºå™¨å°†é€šè¿‡JavaScriptåŠ¨æ€æ·»åŠ  -->
    </div>

    <!-- å¯¼èˆªç®­å¤´ -->
    <button class="nav-arrow prev" id="navPrev">â€¹</button>
    <button class="nav-arrow next" id="navNext">â€º</button>

    <!-- çŠ¶æ€æ˜¾ç¤º -->
    <div class="status" id="status">
        æ­£åœ¨åŠ è½½å›¾ç‰‡...
    </div>

    <!-- åŠ è½½æç¤º -->
    <div class="loading-overlay" id="loadingOverlay" style="
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 100;
        color: white;
        font-size: 18px;
        backdrop-filter: blur(10px);
    ">
        <div style="text-align: center;">
            <div style="margin-bottom: 20px;">ğŸ“¸ æ­£åœ¨åŠ è½½å›¾ç‰‡...</div>
            <div id="loadingProgress">0/5</div>
        </div>
    </div>

    <script>
        class DualCarousel {
            constructor() {
                // ä»staticç›®å½•è¯»å–çš„å›¾ç‰‡æ–‡ä»¶åˆ—è¡¨
                this.images = [
                    './static/4faa98f3-3ca5-4a92-b989-f662707b3ec23.png',
                    './static/4faa98f3-3ca5-4a92-b989-f662707b3ec3.png',
                    './static/67f33d020005bcec1d6d3ea158300315000000a100004f50.jpg',
                    './static/79dU1My0AWfz233d851c175dbb3fb1eac84e1eee8a44.png',
                    './static/8d9d7397-83b4-4cbe-8f17-de76605f5739.png'
                ];
                
                this.currentIndex = 0;
                this.interval = 6000; // é»˜è®¤3ç§’
                this.isPlaying = true;
                this.timer = null;
                this.loadedImages = 0;
                this.totalImages = this.images.length;
                
                this.init();
            }

            init() {
                var self = this;
                this.preloadImages().then(function() {
                    self.createImages();
                    self.createIndicators();
                    self.bindEvents();
                    self.startAutoPlay();
                    self.updateStatus();
                });
            }

            // é¢„åŠ è½½å›¾ç‰‡
            preloadImages() {
                var self = this;
                return new Promise(function(resolve) {
                    if (self.images.length === 0) {
                        resolve();
                        return;
                    }

                    self.images.forEach(function(src, index) {
                        var img = new Image();
                        img.onload = function() {
                            self.loadedImages++;
                            self.updateLoadingStatus();
                            if (self.loadedImages === self.totalImages) {
                                resolve();
                            }
                        };
                        img.onerror = function() {
                            console.warn('å›¾ç‰‡åŠ è½½å¤±è´¥: ' + src);
                            self.loadedImages++;
                            if (self.loadedImages === self.totalImages) {
                                resolve();
                            }
                        };
                        img.src = src;
                    });
                });
            }

            updateLoadingStatus() {
                var loadingProgress = document.getElementById('loadingProgress');
                var loadingOverlay = document.getElementById('loadingOverlay');
                
                if (loadingProgress) {
                    loadingProgress.textContent = this.loadedImages + '/' + this.totalImages;
                }
                
                // åŠ è½½å®Œæˆåéšè—åŠ è½½ç•Œé¢
                if (this.loadedImages === this.totalImages) {
                    setTimeout(function() {
                        if (loadingOverlay) {
                            loadingOverlay.style.display = 'none';
                        }
                    }, 500);
                }
            }

            createImages() {
                var mainCarousel = document.getElementById('mainCarousel');
                var backgroundCarousel = document.getElementById('backgroundCarousel');
                var self = this;
                
                // æ£€æŸ¥æ˜¯å¦æœ‰å›¾ç‰‡
                if (this.images.length === 0) {
                    this.showNoImagesMessage();
                    return;
                }
                
                this.images.forEach(function(src, index) {
                    // åˆ›å»ºä¸»è½®æ’­å›¾å›¾ç‰‡
                    var mainImg = document.createElement('img');
                    mainImg.src = src;
                    mainImg.alt = 'å›¾ç‰‡ ' + (index + 1);
                    if (index === 0) mainImg.classList.add('active');
                    mainCarousel.appendChild(mainImg);
                    
                    // åˆ›å»ºèƒŒæ™¯è½®æ’­å›¾å›¾ç‰‡
                    var bgImg = document.createElement('img');
                    bgImg.src = src;
                    bgImg.alt = 'èƒŒæ™¯å›¾ç‰‡ ' + (index + 1);
                    if (index === 0) bgImg.classList.add('active');
                    backgroundCarousel.appendChild(bgImg);
                });
            }

            showNoImagesMessage() {
                var mainCarousel = document.getElementById('mainCarousel');
                var messageDiv = document.createElement('div');
                messageDiv.style.cssText = 
                    'position: absolute;' +
                    'top: 50%;' +
                    'left: 50%;' +
                    'transform: translate(-50%, -50%);' +
                    'color: white;' +
                    'text-align: center;' +
                    'font-size: 24px;' +
                    'background: rgba(0, 0, 0, 0.8);' +
                    'padding: 40px;' +
                    'border-radius: 10px;' +
                    'backdrop-filter: blur(10px);';
                messageDiv.innerHTML = 
                    '<div style="margin-bottom: 20px;">ğŸ“ æœªæ‰¾åˆ°å›¾ç‰‡</div>' +
                    '<div style="font-size: 16px; opacity: 0.8;">' +
                        'è¯·åœ¨ ./static ç›®å½•ä¸‹æ”¾ç½®å›¾ç‰‡æ–‡ä»¶<br>' +
                        'æ”¯æŒæ ¼å¼ï¼šjpg, png, gif, webp' +
                    '</div>';
                mainCarousel.appendChild(messageDiv);
            }

            createIndicators() {
                var indicatorsContainer = document.getElementById('indicators');
                var self = this;
                
                this.images.forEach(function(_, index) {
                    var indicator = document.createElement('div');
                    indicator.classList.add('indicator');
                    if (index === 0) indicator.classList.add('active');
                    indicator.addEventListener('click', function() { 
                        self.goToSlide(index); 
                    });
                    indicatorsContainer.appendChild(indicator);
                });
            }

            bindEvents() {
                // é—´éš”æ§åˆ¶
                var intervalSlider = document.getElementById('intervalSlider');
                var intervalInput = document.getElementById('intervalInput');
                var self = this;
                
                intervalSlider.addEventListener('input', function(e) {
                    self.interval = parseFloat(e.target.value) * 1000;
                    intervalInput.value = e.target.value;
                    self.restartAutoPlay();
                    self.updateStatus();
                });
                
                intervalInput.addEventListener('change', function(e) {
                    var value = Math.max(1, Math.min(10, parseFloat(e.target.value)));
                    self.interval = value * 1000;
                    intervalSlider.value = value;
                    intervalInput.value = value;
                    self.restartAutoPlay();
                    self.updateStatus();
                });

                // æ’­æ”¾æ§åˆ¶
                document.getElementById('playPauseBtn').addEventListener('click', function() {
                    self.togglePlayPause();
                });

                // å¯¼èˆªæŒ‰é’®
                document.getElementById('prevBtn').addEventListener('click', function() {
                    self.prevSlide();
                });
                
                document.getElementById('nextBtn').addEventListener('click', function() {
                    self.nextSlide();
                });

                // å¯¼èˆªç®­å¤´
                document.getElementById('navPrev').addEventListener('click', function() {
                    self.prevSlide();
                });
                
                document.getElementById('navNext').addEventListener('click', function() {
                    self.nextSlide();
                });

                // é”®ç›˜æ§åˆ¶
                document.addEventListener('keydown', function(e) {
                    switch(e.key) {
                        case 'ArrowLeft':
                            self.prevSlide();
                            break;
                        case 'ArrowRight':
                            self.nextSlide();
                            break;
                        case ' ':
                            e.preventDefault();
                            self.togglePlayPause();
                            break;
                    }
                });
            }

            goToSlide(index) {
                // ç§»é™¤å½“å‰æ´»åŠ¨çŠ¶æ€
                document.querySelectorAll('#mainCarousel img').forEach(function(img) {
                    img.classList.remove('active');
                });
                document.querySelectorAll('#backgroundCarousel img').forEach(function(img) {
                    img.classList.remove('active');
                });
                document.querySelectorAll('.indicator').forEach(function(indicator) {
                    indicator.classList.remove('active');
                });

                // è®¾ç½®æ–°çš„æ´»åŠ¨çŠ¶æ€
                this.currentIndex = index;
                document.querySelectorAll('#mainCarousel img')[this.currentIndex].classList.add('active');
                document.querySelectorAll('#backgroundCarousel img')[this.currentIndex].classList.add('active');
                document.querySelectorAll('.indicator')[this.currentIndex].classList.add('active');
                
                this.updateStatus();
            }

            nextSlide() {
                var nextIndex = (this.currentIndex + 1) % this.images.length;
                this.goToSlide(nextIndex);
            }

            prevSlide() {
                var prevIndex = (this.currentIndex - 1 + this.images.length) % this.images.length;
                this.goToSlide(prevIndex);
            }

            startAutoPlay() {
                var self = this;
                if (this.isPlaying) {
                    this.timer = setInterval(function() {
                        self.nextSlide();
                    }, this.interval);
                }
            }

            stopAutoPlay() {
                if (this.timer) {
                    clearInterval(this.timer);
                    this.timer = null;
                }
            }

            restartAutoPlay() {
                this.stopAutoPlay();
                this.startAutoPlay();
            }

            togglePlayPause() {
                this.isPlaying = !this.isPlaying;
                
                if (this.isPlaying) {
                    this.startAutoPlay();
                } else {
                    this.stopAutoPlay();
                }
                
                var btn = document.getElementById('playPauseBtn');
                btn.textContent = this.isPlaying ? 'â¸ï¸' : 'â–¶ï¸';
                
                this.updateStatus();
            }

            updateStatus() {
                var status = document.getElementById('status');
                var playStatus = this.isPlaying ? 'æ­£åœ¨æ’­æ”¾' : 'å·²æš‚åœ';
                var currentImage = this.currentIndex + 1;
                var totalImages = this.images.length;
                var intervalSeconds = this.interval / 1000;
                
                status.textContent = playStatus + ' | å›¾ç‰‡: ' + currentImage + '/' + totalImages + ' | é—´éš”: ' + intervalSeconds + 'ç§’';
            }
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–è½®æ’­å›¾
        document.addEventListener('DOMContentLoaded', function() {
            new DualCarousel();
        });

        // å›¾ç‰‡åŠ è½½é”™è¯¯å¤„ç†
        document.addEventListener('error', function(e) {
            if (e.target.tagName === 'IMG') {
                console.warn('å›¾ç‰‡åŠ è½½å¤±è´¥: ' + e.target.src);
                // å¯ä»¥åœ¨è¿™é‡Œè®¾ç½®é»˜è®¤å›¾ç‰‡æˆ–æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
            }
        }, true);
    </script>
</body>
</html>